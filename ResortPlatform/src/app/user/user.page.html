<ion-header [translucent]="true">
  <ion-toolbar style="text-align: center">
    <img id="site-logo" style="height: 0.7rem; padding-inline: 20px" />
  </ion-toolbar>
  <ion-toolbar color="primary">
    <ion-grid>
      <ion-row class="ion-text-center">
        <ion-col>
          <ion-icon name="person-outline"></ion-icon>
        </ion-col>
      </ion-row>
      <ion-row class="ion-text-center">
        <ion-col *ngIf="usr">
          <ion-label>{{usr.firstName}} {{usr.lastName}}</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-list [inset]="true" *ngIf="usr">
    <ion-item>
      <ion-label>Departments: {{usr.departments.join(", ")}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>Employee No: {{usr.employeeNumber}}</ion-label>
    </ion-item>
    <ion-item>
      <ion-label>E-mail: {{usr.email}}</ion-label>
    </ion-item>
  </ion-list>

  <ion-button
    class="center-button"
    color="primary"
    (click)="openPasswordDialog(true)"
    >Change password</ion-button
  >

  <ion-modal [isOpen]="openPasswordModal" backdropDismiss="false">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Change password</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="openPasswordDialog(false)">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-list>
          <ion-item>
            <ion-input
              labelPlacement="stacked"
              label="Old password"
              type="password"
              [(ngModel)]="oldPass"
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-input
              labelPlacement="stacked"
              label="New password"
              type="password"
              [(ngModel)]="newPass"
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-input
              labelPlacement="stacked"
              label="Repeat new password"
              type="password"
              [(ngModel)]="repeatPass"
            ></ion-input>
          </ion-item>
        </ion-list>
        <ion-button (click)="changePasswordBtn()"
          >Confirm password change</ion-button
        >
        <p style="color: red">{{errMsg}}</p>
      </ion-content>
    </ng-template>
  </ion-modal>

  <br />

  <ion-button class="center-button" color="danger" (click)="logout()"
    ><ion-icon name="log-out-outline"></ion-icon>Logout</ion-button
  >
</ion-content>
