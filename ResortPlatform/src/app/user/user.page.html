<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row class="ion-no-margin ion-no-padding">
      <ion-col size="12" class="ion-no-margin ion-no-padding">
        <ion-text color="primary" class="ion-no-margin ion-no-padding"
          ><h2
            style="font-weight: bold; font-family: 'baskerville'; width: 100%"
          >
            My PROFILE
          </h2>
        </ion-text>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" class="ion-text-center">
        <div class="circle-container">
          <ion-icon
            name="person-outline"
            class="circle-icon"
            size="large"
            color="primary"
          ></ion-icon>
        </div>
      </ion-col>
    </ion-row>
    <div *ngIf="usr">
      <ion-row class="ion-margin-top ion-margin-horizontal">
        <ion-col class="user-info-container ion-padding">
          <ion-label class="info-label">Name, Surname: </ion-label>
          <ion-text>{{usr.firstName}} {{usr.lastName}}</ion-text>
        </ion-col>
      </ion-row>
<!--      <ion-row class="ion-margin-top ion-margin-horizontal">-->
<!--        <ion-col class="user-info-container ion-padding">-->
<!--          <ion-label class="info-label">Username:</ion-label>-->
<!--          <ion-text></ion-text>-->
<!--        </ion-col>-->
<!--      </ion-row>-->
      <ion-row class="ion-margin-top ion-margin-horizontal">
        <ion-col class="user-info-container ion-padding">
          <ion-label class="info-label">E-mail: </ion-label>
          <ion-text>{{usr.email}}</ion-text>
        </ion-col>
      </ion-row>
      <ion-row class="ion-margin-top ion-margin-horizontal">
        <ion-col class="user-info-container ion-padding">
          <ion-label class="info-label">Departments: </ion-label>
          <ion-text *ngFor="let dep of usr.departments">{{dep.departmentName}} &nbsp;</ion-text>
        </ion-col>
      </ion-row>
      <ion-row class="ion-margin-top ion-margin-horizontal">
        <ion-col
          (click)="openPasswordDialog(true)"
          class="user-info-container ion-padding"
        >
          <ion-label class="change-password-text center-button" style="cursor: pointer"
            >Change Password?</ion-label
          >
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>

  <ion-modal [isOpen]="openPasswordModal" backdropDismiss="false">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title></ion-title>
          <ion-buttons slot="end">
            <ion-button class="transparent-ios" (click)="openPasswordDialog(false)"
            >
              <ion-icon style="font-size: 2rem" name="close-outline"></ion-icon>
            </ion-button
            >
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-row>
          <ion-col>
            <ion-text class="ion-text-center">
              <h3>Change password</h3>
            </ion-text>
          </ion-col>
        </ion-row>

        <ion-card style="border-radius: 10px">
          <ion-card-title class="ion-margin" style="margin-bottom: 0">
            <ion-text >
              <h5 style="margin-bottom: 0">
                Old password:
              </h5>
            </ion-text>
          </ion-card-title>
          <ion-card-content style="padding-top: 0">
            <ion-input
              aria-label="Repeat new password:"
              type="password"
              [(ngModel)]="oldPass"
            ></ion-input>
          </ion-card-content>
        </ion-card>

        <ion-card style="border-radius: 10px">
          <ion-card-title class="ion-margin" style="margin-bottom: 0">
            <ion-text >
              <h5 style="margin-bottom: 0">
                New password:
              </h5>
            </ion-text>
          </ion-card-title>
          <ion-card-content style="padding-top: 0">
            <ion-input
              aria-label="New password:"
              type="password"
              [(ngModel)]="newPass"
            ></ion-input>
          </ion-card-content>
        </ion-card>

        <ion-card style="border-radius: 10px">
          <ion-card-title class="ion-margin" style="margin-bottom: 0">
                <ion-text >
                  <h5 style="margin-bottom: 0">
                    Repeat new password:
                  </h5>
                </ion-text>
          </ion-card-title>
          <ion-card-content style="padding-top: 0">
            <ion-input
              aria-label="Repeat new password:"
              type="password"
              [(ngModel)]="repeatPass"
            ></ion-input>
        </ion-card-content>
        </ion-card>





<!--        <ion-row style="width: 100%">-->
<!--          <ion-col>-->

<!--            <ion-list style="width: 100%" class="pwd-change">-->
<!--              <ion-item>-->
<!--                <ion-text>-->
<!--                  <h3>-->
<!--                    Old password:-->
<!--                  </h3>-->
<!--                </ion-text>-->
<!--                <ion-input-->
<!--                  aria-label="Old password:"-->
<!--                  type="password"-->
<!--                  [(ngModel)]="oldPass"-->
<!--                ></ion-input>-->
<!--              </ion-item>-->
<!--              <ion-item lines="none">-->
<!--                <ion-input-->
<!--                  label="New password:"-->
<!--                  type="password"-->
<!--                  [(ngModel)]="newPass"-->
<!--                ></ion-input>-->
<!--              </ion-item>-->
<!--              <ion-item lines="none">-->
<!--                <ion-input-->
<!--                  label="Repeat new password:"-->
<!--                  type="password"-->
<!--                  [(ngModel)]="repeatPass"-->
<!--                ></ion-input>-->
<!--              </ion-item>-->
<!--            </ion-list>-->
<!--          </ion-col>-->
<!--        </ion-row>-->
          <ion-row [hidden]="!errMsg">
  <ion-col>
    <ion-text>

      <h5 style="color: red">{{errMsg}}</h5>
    </ion-text>
  </ion-col>
          </ion-row>

          <br [hidden]="errMsg">
          <br>
        <br>
        <br>
          <br>
          <br>
        <ion-row style="width: 100%">
          <ion-col style="width: 100%">

            <ion-button style="width: 100%" class="ion-justify-content-end gradient-btn" (click)="changePasswordBtn()"
            >Confirm password change</ion-button
            >
          </ion-col>
        </ion-row>
      </ion-content>
    </ng-template>
  </ion-modal>

  <br />

</ion-content>
<ion-footer style="width: 100%">
  <ion-row style="width: 100%">
    <ion-col style="width: 100%">
      <ion-button style="width: 100%"  class="center-button" color="danger" (click)="logout()"
      ><ion-icon name="log-out-outline"></ion-icon>Logout</ion-button
      >
    </ion-col>
  </ion-row><br>
</ion-footer>
